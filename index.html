<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Car Tools ‚Äì EV Efficiency & VED Bands</title>
  <style>
    :root { --transition-speed: 0.2s; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh; margin: 0; display: flex;
      justify-content: center; align-items: flex-start;
      padding: 32px 16px; box-sizing: border-box;
      transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
    }
    body[data-theme="dark"] {
      background: radial-gradient(circle at top, #1f2937, #020617 60%);
      color: #e5e7eb;
      --card-bg:#020617;--border-color:#1f2937;--muted-text:#9ca3af;--input-bg:#020617;
      --input-border:#4b5563;--link-color:#60a5fa;--result-info-bg:#0b1120;--result-info-text:#e5e7eb;
      --button-bg:linear-gradient(135deg,#2563eb,#22c55e);--chip-bg:#020617;--chip-border:#4b5563;
    }
    body[data-theme="light"] {
      background:#f3f4f6;color:#111827;
      --card-bg:#fff;--border-color:#e5e7eb;--muted-text:#6b7280;--input-bg:#f9fafb;
      --input-border:#d1d5db;--link-color:#2563eb;--result-info-bg:#eff6ff;--result-info-text:#1e3a8a;
      --button-bg:linear-gradient(135deg,#2563eb,#22c55e);--chip-bg:#fff;--chip-border:#d1d5db;
    }
    .container{width:100%;max-width:720px;}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px;}
    .header-text h1{margin:0 0 4px;font-size:1.7rem;}
    .header-text p{margin:0;font-size:0.9rem;color:var(--muted-text);}
    .theme-toggle{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--border-color);background:var(--card-bg);font-size:0.8rem;cursor:pointer;}
    .switcher{display:flex;justify-content:center;margin:20px auto 18px;gap:8px;flex-wrap:wrap;}
    .switch-btn{padding:8px 16px;border-radius:999px;border:1px solid var(--chip-border);background:var(--chip-bg);cursor:pointer;}
    .switch-btn.active{background:var(--button-bg);color:#fff;border:none;}
    .card{background:var(--card-bg);border-radius:16px;padding:22px 24px;box-shadow:0 20px 45px rgba(0,0,0,0.18);border:1px solid var(--border-color);}
    .tool{display:none}.tool.active{display:block}
    label{display:block;margin-bottom:6px;font-size:0.9rem;font-weight:600;}
    input,select{width:100%;padding:9px 11px;border-radius:10px;border:1px solid var(--input-border);background:var(--input-bg);color:inherit;font-size:0.95rem;margin-bottom:12px;}
    button.primary{width:100%;padding:10px 12px;border-radius:10px;border:none;font-weight:600;cursor:pointer;background:var(--button-bg);color:white;}
    .result{margin-top:14px;padding:10px 12px;border-radius:10px;display:none;background:var(--result-info-bg);color:var(--result-info-text);}
    .hint,.note{margin-top:8px;font-size:0.8rem;color:var(--muted-text);line-height:1.4;}
    .section-divider{margin:16px 0 10px;border-top:1px solid var(--border-color);padding-top:10px;font-size:0.85rem;color:var(--muted-text);font-weight:600;text-transform:uppercase;}
<style>
  :root { --transition-speed: 0.2s; }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    min-height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 32px 16px;
    box-sizing: border-box;
    transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
  }

  /* üåô Dark mode theme */
  body[data-theme="dark"] {
    background: radial-gradient(circle at top, #1f2937, #020617 60%);
    color: #f3f4f6; /* light text for readability */
    --card-bg: #020617;
    --border-color: #1f2937;
    --muted-text: #d1d5db;
    --input-bg: #0f172a;
    --input-border: #334155;
    --link-color: #93c5fd;
    --result-info-bg: #0b1120;
    --result-info-text: #e5e7eb;
    --button-bg: linear-gradient(135deg, #2563eb, #22c55e);
    --chip-bg: #020617;
    --chip-border: #475569;
  }

  /* ‚òÄÔ∏è Light mode theme */
  body[data-theme="light"] {
    background: #f3f4f6;
    color: #111827;
    --card-bg: #ffffff;
    --border-color: #e5e7eb;
    --muted-text: #6b7280;
    --input-bg: #f9fafb;
    --input-border: #d1d5db;
    --link-color: #2563eb;
    --result-info-bg: #eff6ff;
    --result-info-text: #1e3a8a;
    --button-bg: linear-gradient(135deg, #2563eb, #22c55e);
    --chip-bg: #ffffff;
    --chip-border: #d1d5db;
  }

  .container { width: 100%; max-width: 720px; }

  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 16px;
  }

  .header-text h1 {
    margin: 0 0 4px;
    font-size: 1.7rem;
    color: #fff; /* white title in dark mode */
  }

  .header-text p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--muted-text);
  }

  .theme-toggle {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid var(--border-color);
    background: var(--card-bg);
    color: #f3f4f6; /* make button text white in dark mode */
    font-size: 0.8rem;
    cursor: pointer;
  }

  .switcher {
    display: flex;
    justify-content: center;
    margin: 20px auto 18px;
    gap: 8px;
    flex-wrap: wrap;
  }

  .switch-btn {
    padding: 8px 16px;
    border-radius: 999px;
    border: 1px solid var(--chip-border);
    background: var(--chip-bg);
    color: inherit;
    cursor: pointer;
  }

  .switch-btn.active {
    background: var(--button-bg);
    color: #ffffff;
    border: none;
  }

  .card {
    background: var(--card-bg);
    border-radius: 16px;
    padding: 22px 24px;
    box-shadow: 0 20px 45px rgba(0,0,0,0.18);
    border: 1px solid var(--border-color);
  }

  label {
    display: block;
    margin-bottom: 6px;
    font-size: 0.9rem;
    font-weight: 600;
  }

  input, select {
    width: 100%;
    padding: 9px 11px;
    border-radius: 10px;
    border: 1px solid var(--input-border);
    background: var(--input-bg);
    color: inherit;
    font-size: 0.95rem;
    margin-bottom: 12px;
  }

  button.primary {
    width: 100%;
    padding: 10px 12px;
    border-radius: 10px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    background: var(--button-bg);
    color: #ffffff;
  }

  .result {
    margin-top: 14px;
    padding: 10px 12px;
    border-radius: 10px;
    display: none;
    background: var(--result-info-bg);
    color: var(--result-info-text);
  }

  .hint, .note {
    margin-top: 8px;
    font-size: 0.8rem;
    color: var(--muted-text);
    line-height: 1.4;
  }

  .section-divider {
    margin: 16px 0 10px;
    border-top: 1px solid var(--border-color);
    padding-top: 10px;
    font-size: 0.85rem;
    color: var(--muted-text);
    font-weight: 600;
    text-transform: uppercase;
  }
</style>

  <script>
    // theme toggle
    const b=document.body,t=document.getElementById("theme-toggle"),
          i=document.getElementById("theme-icon"),l=document.getElementById("theme-label");
    function setTheme(x){
      b.dataset.theme=x;
      i.textContent=x==="light"?"‚òÄÔ∏è":"üåô";
      l.textContent=x==="light"?"Light":"Dark";
      localStorage.setItem("car-tools-theme",x);
    }
    setTheme(localStorage.getItem("car-tools-theme")||"dark");
    t.onclick=()=>setTheme(b.dataset.theme==="dark"?"light":"dark");

    // switcher
    document.querySelectorAll(".switch-btn").forEach(btn=>btn.onclick=()=>{
      document.querySelectorAll(".switch-btn").forEach(b=>b.classList.remove("active"));
      document.querySelectorAll(".tool").forEach(t=>t.classList.remove("active"));
      btn.classList.add("active");
      document.getElementById(btn.dataset.target).classList.add("active");
    });

    // EV tools
    const LPG=4.54609,PET=9.5,DIE=10.7;
    const evLines=document.getElementById("ev-lines"),
          evCost=document.getElementById("ev-cost-line"),
          evRes=document.getElementById("ev-result");
    document.getElementById("ev-calc-btn").onclick=()=>{
      const eff=parseFloat(document.getElementById("ev-mpkwh").value),
            price=parseFloat(document.getElementById("ev-price").value);
      evRes.style.display="block";
      if(!eff){evLines.textContent="Enter a valid mi/kWh.";evCost.textContent="";return;}
      const mpgP=eff*PET*LPG,mpgD=eff*DIE*LPG;
      evLines.innerHTML=`${eff.toFixed(2)} mi/kWh ‚âà ${mpgP.toFixed(1)} mpg (petrol) | ${mpgD.toFixed(1)} mpg (diesel)`;
      evCost.textContent=price?`‚âà ${(price/eff).toFixed(1)} p/mile @ ${price.toFixed(1)} p/kWh`:"";
    };

    const evPack=document.getElementById("ev-pack"),
          evSoc=document.getElementById("ev-soc"),
          evRange=document.getElementById("ev-range"),
          evEst=document.getElementById("ev-est-result"),
          evTxt=document.getElementById("ev-est-text");
    document.getElementById("ev-estimate-btn").onclick=()=>{
      const p=parseFloat(evPack.value),
            s=parseFloat(evSoc.value),
            r=parseFloat(evRange.value);
      evEst.style.display="block";
      if(!p||!s||!r||s<=0||s>100){
        evTxt.textContent="Enter battery kWh, %, and range.";
        return;
      }
      evTxt.textContent=`‚âà ${(r/(p*(s/100))).toFixed(2)} mi/kWh based on ${r} mi at ${s}% of ${p} kWh.`;
    };

    // tax lookup
    const taxMain=document.getElementById("tax-main"),
          taxExtra=document.getElementById("tax-extra"),
          taxBox=document.getElementById("tax-result");
    document.getElementById("lookup-btn").onclick=()=>{
      const co2=parseFloat(document.getElementById("co2").value),
            period=document.getElementById("reg-period").value;
      if(!co2){
        taxBox.style.display="block";
        taxMain.textContent="Enter a CO‚ÇÇ value.";
        taxExtra.textContent="";
        return;
      }
      taxBox.style.display="block";
      if(period==="2001-2017"){
        let band="M",range=">255";
        const map=[[100,"A"],[110,"B"],[120,"C"],[130,"D"],[140,"E"],[150,"F"],[165,"G"],[175,"H"],[185,"I"],[200,"J"],[225,"K"],[255,"L"]];
        for(const[m,bn] of map){
          if(co2<=m){band=bn;range=`‚â§${m}`;break;}
        }
        taxMain.textContent=`CO‚ÇÇ ${co2} g/km ‚Üí Band ${band} (${range} g/km)`;
        taxExtra.textContent="1 Mar 2001 ‚Äì 31 Mar 2017 (A‚ÄìM bands).";
      }else{
        let label="";
        if(co2===0)label="Zero emission";
        else if(co2<=50)label="Ultra-low";
        else if(co2<=100)label="Low";
        else if(co2<=150)label="Medium";
        else if(co2<=225)label="High";
        else label="Very high";
        taxMain.textContent=`CO‚ÇÇ ${co2} g/km ‚Üí ${label} range.`;
        taxExtra.textContent="Cars from 1 Apr 2017 ‚Äì first year CO‚ÇÇ-based then flat rate.";
      }
    };
  </script>
</body>
</html>

